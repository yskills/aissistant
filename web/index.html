<!doctype html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Luna Assistant Dev UI</title>
  <link rel="stylesheet" href="./styles.css" />
  <script src="./app.js" defer></script>
</head>
<body>
  <button id="fab" class="assistant-fab" aria-label="Assistant √∂ffnen">‚ú¶</button>

  <aside id="panel" class="panel" role="dialog" aria-modal="false">
    <div class="panel-head glass">
      <div class="assistant-title">
        <button id="avatarBtn" class="avatar" title="Profilbild vergr√∂√üern" aria-label="Profilbild vergr√∂√üern">L</button>
        <div class="assistant-meta">
          <button id="charNameBtn" class="char-name-btn" title="Model ausw√§hlen" aria-label="Model ausw√§hlen">
            <h2 id="charName">Luna</h2>
          </button>
          <div id="llmStatus" class="status">Lade Status ...</div>
        </div>
      </div>
      <div class="head-actions">
        <button id="modeToggle" class="chip-btn mode-toggle">‚óã normal</button>
        <button id="settingsToggle" class="icon-btn" title="Settings">‚öô</button>
        <button id="closeBtn" class="icon-btn" title="Schlie√üen">√ó</button>
      </div>
    </div>

    <div class="panel-tabs glass">
      <div class="tabs">
        <button id="tabChat" class="tab active">Chat</button>
        <button id="tabSettings" class="tab">Settings</button>
      </div>
      <div class="infra-inline" aria-live="polite">
        <span><strong id="serverStatus" class="infra-value">pr√ºfe ...</strong> ¬∑ <small id="serverDetail">Core</small></span>
        <span><strong id="gpuStatus" class="infra-value">pr√ºfe ...</strong> ¬∑ <small id="gpuDetail">Trainer</small></span>
        <span id="serverSpinner" class="infra-spinner"></span>
        <span id="gpuSpinner" class="infra-spinner"></span>
      </div>
    </div>

    <div class="panel-body">
      <section id="chatView" class="chat-view active">
        <div class="conversation-pfp-wrap" aria-hidden="true">
          <img id="conversationPfp" class="conversation-pfp idle" src="https://api.dicebear.com/9.x/lorelei/svg?seed=luna-cute-egirl" alt="Luna Profil" />
        </div>
        <div id="conversationHint" class="conversation-hint">Gespr√§chsmodus starten</div>
        <div id="chatScroll" class="chat-scroll"></div>
        <div class="panel-foot">
          <div id="voiceStatus" class="voice-status idle" aria-live="polite">üéôÔ∏è Voice bereit</div>
          <textarea id="chatInput" placeholder="Schreib hier..." rows="1"></textarea>
          <button id="btnConversation" class="conversation-btn" title="Gespr√§chsmodus">‚óâ</button>
          <button id="btnVoiceListen" class="send-btn voice-btn" title="Spracheingabe">üé§</button>
          <button id="sendBtn" class="send-btn" title="Senden">‚Üí</button>
        </div>
      </section>

      <section id="settingsView" class="settings-view">
        <div class="settings-scroll">
          <div class="settings-section">
            <p class="section-title">Voice</p>
            <div class="line">
              <label>Voice Preset</label>
              <select id="voicePreset"></select>
            </div>
            <div class="line">
              <label>TTS Provider</label>
              <select id="voiceTtsProvider"></select>
              <label>STT Provider</label>
              <select id="voiceSttProvider"></select>
            </div>
            <div class="line">
              <label>Ger√§te-Stimme</label>
              <select id="voiceDevice"></select>
            </div>
            <div class="line">
              <label>Avatar URL</label>
              <input id="voiceAvatarUrl" type="text" placeholder="https://... oder ./assets/luna-profile.svg" />
            </div>
            <div class="line">
              <label>Rate</label>
              <input id="voiceRate" type="number" step="0.01" min="0.6" max="1.5" value="1.03" />
              <label>Pitch</label>
              <input id="voicePitch" type="number" step="0.01" min="0.6" max="2.0" value="1.35" />
            </div>
            <div class="line compact">
              <label>Auto-Speak</label>
              <input id="voiceAutoSpeak" type="checkbox" />
              <label>Auto-Learn Voice</label>
              <input id="voiceAutoLearn" type="checkbox" />
              <button id="btnVoiceSpeak" class="soft">üîä Letzte Antwort</button>
              <button id="btnVoiceStop" class="soft">‚èπ Stop</button>
              <button id="btnVoiceSave" class="primary">Voice speichern</button>
            </div>
          </div>

          <div class="settings-section">
            <p class="section-title">Training</p>
            <div class="line">
              <label>Profil</label>
              <select id="trainingProfile">
                <option value="auto">Auto (bestes Profil)</option>
                <option value="gpu-fast">GPU Fast</option>
                <option value="cpu-quiet">CPU Quiet</option>
              </select>
            </div>
            <div class="line">
              <label>minCurated</label>
              <input id="minCurated" type="number" value="20" />
              <button id="btnEnsureTrainer" class="soft">Trainer starten</button>
              <button id="btnExampleAdapter" class="primary">Train Smart</button>
              <button id="btnRefresh" class="soft">Refresh</button>
            </div>
            <div class="overview">
              <div class="ov-card"><strong id="ovHist">0</strong><span>History</span></div>
              <div class="ov-card"><strong id="ovUnc">0</strong><span>Uncensored</span></div>
              <div class="ov-card"><strong id="ovMem">0</strong><span>Memories</span></div>
              <div class="ov-card"><strong id="ovMode">normal</strong><span>Mode</span></div>
            </div>
          </div>

          <div class="settings-section">
            <p class="section-title">Speicher</p>
            <div class="overview">
              <button id="btnDeleteDay" class="soft">Tag l√∂schen</button>
              <button id="btnDelete7Days" class="soft">7 Tage l√∂schen</button>
              <button id="btnDeleteMonth" class="soft">Monat l√∂schen</button>
              <button id="btnReset" class="danger">Complete Reset</button>
            </div>
          </div>

          <div class="status-line" id="adapterPathOut"></div>
          <div class="status-line" id="adapterHintOut"></div>

          <div class="status-line" id="opsOut"></div>
        </div>
      </section>
    </div>
  </aside>

  <div id="overlay" class="overlay" role="dialog" aria-modal="true">
    <div class="char-modal">
      <h3 style="margin:0 0 10px;">Charakter ausw√§hlen</h3>
      <div id="charGrid" class="char-grid"></div>
      <div style="display:flex;justify-content:flex-end;margin-top:10px;">
        <button id="closeOverlay" class="icon-btn">Schlie√üen</button>
      </div>
    </div>
  </div>

  <div id="avatarOverlay" class="overlay avatar-overlay" role="dialog" aria-modal="true">
    <div class="avatar-modal">
      <img id="avatarPreviewImage" src="https://api.dicebear.com/9.x/lorelei/svg?seed=luna-cute-egirl" alt="Luna Profilbild gro√ü" />
      <div style="display:flex;justify-content:flex-end;margin-top:10px;">
        <button id="closeAvatarOverlay" class="icon-btn">Schlie√üen</button>
      </div>
    </div>
  </div>
</body>
</html>
